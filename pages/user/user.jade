if !viewUser
	section
		header
			h2 Error
		
		p User not found.
else
	section
		.image-container
			img.image(src=viewUser.gravatarURL, alt='Profile image', width=320, height=320)
		
		.intro-container
			h2.nick= viewUser.nick
			
			if viewUser.tagline
				p.tagline
					em= viewUser.tagline
			else
				p.tagline
					em No tagline yet.
			
			if viewUser.website
				p.website
					a(href=viewUser.website.startsWith('http') ? viewUser.website : 'http://' + viewUser.website, target='_blank', rel='nofollow')= viewUser.website
		
		mixin text(field)
			.field
				- var value = getProperty(viewUser, field.id)
				label(for=field.id)= field.label
				if canEdit
					if field.options
						select.save-on-change(id=field.id)
							each optionValue, key in field.options
								if value === optionValue
									option(value=optionValue, selected)= key
								else
									option(value=optionValue)= key
					else
						input.save-on-change(id=field.id, type=field.type ? field.type : 'text', value=getProperty(viewUser, field.id), placeholder=field.description)
				else
					p.value(id=field.id)= value ? value : '-'
		
		.fields
			each category, title in fields
				if title !== 'General' || canEdit
					h3= title
					each field in category
						+text(field)
		
		h3 JSON
		pre#animeList